/*! game-grid - v0.2.0 - 2013-08-13 */!function(a){"use strict";var b=function(a){var b={rootEl:document.querySelector("#game_grid"),cardSelector:".game_card",columns:4,offsetTop:0},c=function(c){var d,e,f,g,h,i,j,k,l=c.rootEl||b.rootEl,m=c.cardSelector||b.cardSelector,n=c.columns||b.columns,o=[],p=c.offsetTop||b.offsetTop,q=Modernizr.prefixed("transform"),r=new a;return e=function(){d=l.querySelectorAll(m)},f=function(){var a=0,b=n;for(o=[],a;b>a;a++)o.push(0)},g=function(a){function b(){Modernizr.csstransforms?(c=a.straighten?0:e.getAttribute("data-rotate"),d=["translate3d(",f,", ",g,", 0) ","rotate(",c,"deg)"].join(""),e.style[q]=d,e.style.opacity=1):(e.style.left=f,e.style.top=g)}var c,d,e=a.el,f=a.left+"px",g=a.top+"px";a.delay?setTimeout(b,70*a.index):b()},h=function(a){var b,c=0,e=document.documentElement.clientWidth,f=-1,h=d.length,i=a&&"undefined"!=typeof a.straighten?a.straighten:!0;for(a&&"function"==typeof a.listen&&r.listenForEndOfAll(d,2,a.listen),c;h>c;c++){var j,k,m=d[c],q=c%n;0===q&&f++,j=p>0?o[q]+p:f>0?o[q]:0,k=e/n*q,o[q]+=m.offsetHeight,g({el:m,top:j,left:k,index:c,straighten:i,delay:m.getAttribute("data-delay")})}b=Math.max.apply(Math,o),l.style.height=b+20+"px"},i=function(a){"undefined"!=typeof a&&("undefined"!=typeof a.columns&&a.columns!==n&&(n=a.columns),"undefined"!=typeof a.offsetTop&&(p=a.offsetTop)),f(),h(a)},j=function(a){l.appendChild(a.fragment),e(),p=0,f(),h(a)},k=function(a){f(),e(),h(a)},{initialize:k,refresh:i,append:j}};return c};"function"==typeof define&&define.amd?define(["./end-pool"],function(a){return b(a)}):a.GameGrid=b(window.endPool)}(window);